- content_for :track_menu do
  %p.tracks Tracks:
  %ul.tracks
    - @conference.tracks_including_subs.sort_by { |e| e.name }.each do |track|
      %li
        .event{class: "track-#{track.name.parameterize}"}= track.name

%h2.title= t '.events'

- @conference.days.each do |day|
  %a{href: "\#day#{day.id}"}= day

- @view_model.events_by_day.each do |day, start_times|
  %a{name: "day#{day.id}"}
  %h2= day
  %hr
  - start_times.each do |start_time, events|
    %h3= start_time

    - if events.count >  0
      - events.sort_by { |a| [a.track&.name ? 1 : 0, a.track&.name] }.each do |event|
        .event-book
          %h2= link_to event.title, public_event_path(id: event.id)
          .label
            - if event.subtitle.present?
              %span= event.subtitle
              \-
            %span{class: track_class(event)}
              = event.room.name
              - if event.language.present? && @conference.languages_including_subs.count > 1
                = "(#{event.language})"

          - if event.abstract.present?
            %p= event.abstract.truncate(250)
          - if event.description.present?
            %p= event.description.truncate(1200)
